"use strict";function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var o=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);if(o){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Analytics=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.segment=e.segment,this.trackMethods=[]}return _createClass(t,[{key:"registerListener",value:function(e){e instanceof Function&&this.trackMethods.push(e)}},{key:"trackEvent",value:function(t){this.trackMethods.forEach(function(e){e(t)})}}]),t}();function PubSub(){var n=[],o="_pubsub_uuid_",c="*",f={},i=-1;function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};setTimeout(function(){var e=new Date;500<=n.length&&n.shift(),t.time=e,n.push(t)},0)}function u(e,t,n){try{e.callback.call(e.context,n,t)}catch(e){var r="PubSub Exception: ".concat(e.message,"  Stack: ").concat(e.stack);console.error?console.error(r):console.log(r)}}function a(e,t,n){e.callback.call(e.context,n,t)}function p(t,e,n,r){var o=f[e],i=r?a:u;f[e]&&Object.keys(o).forEach(function(e){o[e]&&i(o[e],t,n)})}function d(e){var t,n=String(e);return!!f[n]&&(t=f[n],!!Object.keys(t).length)}function r(e,t,n,r,o){var i,u,a,s=(i=e,u=t,a=r,function(){var e=String(i),t=e.lastIndexOf(".");for(p(i,c,u,a),p(i,i,u,a);-1!==t;)t=(e=e.substr(0,t)).lastIndexOf("."),p(i,e,u,a)});function l(e){return o&&o({data:t}),e}return function(e){for(var t=String(e),n=d(t)||d(c),r=t.lastIndexOf(".");!n&&-1!==r;)r=(t=t.substr(0,r)).lastIndexOf("."),n=d(t)||d(c);return n}(e)?!0===n?(s(),l(!0)):(setTimeout(function(){s(),l(!0)},0),!0):l(!1)}var s={debug:function(){return{topics:f,actionsLog:n}},createSSEClient:function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!window.EventSource||r.fakeNotSupported)return console.log("createSSEClient not supported in your browser");var o=new EventSource(t,{withCredentials:!!r.enableCORS});return o.onopen=function(e){return r.onOpen?r.onOpen.call(r.context,e):null},o.onerror=function(e){return r.onError?r.onError.call(r.context,e):(console.log("EventSource '".concat(t," failed. ").concat(e.message)),null)},o.onmessage=function(e){n.call(r.context,e.data)},(r.events?"string"==typeof r.events?[r.events]:r.events:[]).forEach(function(e){o.addEventListener(e,function(e){n.call(r.context,e.data,e.type)})}),o},publish:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return h({type:"publish",topic:e}),r(e,t,!1,!!n.immediateExceptions,n.deliveryCallback)},publishSync:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return h({type:"publishSync",topic:e}),r(e,t,!0,!!n.immediateExceptions,n.deliveryCallback)},subscribe:function(e,t,n){if(h({type:"subscribe",topic:e}),"function"!=typeof t)return!1;f[e]=f[e]||{};var r=o+String(++i);return f[e][r]={callback:t,context:n||t},r},once:function(e,r,o){h({type:"once",topic:e});var i=s.subscribe(e,function(){s.unsubscribe(i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(o,t)});return s},subscribeAll:function(e,t){return h({type:"subscribeAll",topic:""}),s.subscribe(c,e,t)},clearAllSubscriptions:function(){h({type:"clearAllSubscriptions",topic:""}),f={}},clearTopicSubscriptions:function(t){return h({type:"clearTopicSubscriptions",topic:t}),Object.keys(f).forEach(function(e){f[e]&&0===e.indexOf(t)&&delete f[e]}),!1},clearContextSubscriptions:function(e){return h({type:"clearContextSubscriptions",topic:e.toString()}),s.unsubscribe(e)},unsubscribe:function(e,t,n){var i="string"==typeof e&&0<=e.indexOf(o),u="string"==typeof e&&!!f[e],a=!1,s=e,l=t,c=n;return!l&&c&&(l=c,c=null),s||(s=l,l=void 0),s?(h({type:"unsubscribe",topic:s.toString()}),!u||l||c?(Object.keys(f).forEach(function(e){var r=e,o=f[e];if(i&&o[s])return delete o[s],a=s,!0;Object.keys(o).forEach(function(e){var t=e,n=o[e];u&&s===r?c&&n.context===c&&n.callback===l?(a=!0,delete f[r][t]):c||n.context!==l&&n.callback!==l||(a=!0,delete f[r][t]):l?s===n.callback&&l===n.context&&(a=!0,delete f[r][t]):s!==n.callback&&s!==n.context||(a=!0,delete f[r][t])})}),a):(delete f[s],!0)):(console.log("Invalid Use of pubsub: No parameters passed"),!1)}};return s}var pubsub=PubSub,messaging=new pubsub,Data=function(){function e(){_classCallCheck(this,e),this.handlers={}}return _createClass(e,[{key:"registerDataHandler",value:function(e,t){return!(!e||!t)&&(this.handlers[e]=t,!0)}},{key:"getData",value:function(e){if(this.handlers[e]){var t=this.handlers[e].call();return t.then?t:Promise.resolve(t)}return Promise.reject(new Error("Unsupported data type: ".concat(e," was specified")))}}]),e}();function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var intuitLoggingBundle=createCommonjsModule(function(e,t){window,e.exports=function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=116)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(26),i=function(){function i(e,t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.url=e,this.method=t,this.data=n,this.headers=r,this.params=o,this._retryCount=0,this._dispatchInProgress=!1,this._id}return o(i,[{key:"setId",value:function(e){if("string"!=typeof e||""===e||null===e)throw new Error("Must use valid ID format");this._id=e}},{key:"getId",value:function(){return this._id}},{key:"setUrl",value:function(e){if(null===e||""===e||"string"!=typeof e)throw new Error("Must have a valid url");this.url=e}},{key:"getUrl",value:function(e){if(e){var t=(0,u.paramsToQueryString)(this.params);return t&&0<t.length?this.url+"?"+t:this.url}return this.url}},{key:"setMethod",value:function(e){if(null===e||""===e||"string"!=typeof e)throw new Error("Must have a valid method");this.method=e.toLowerCase()}},{key:"getMethod",value:function(){return this.method}},{key:"setPayload",value:function(e){if(null===e)throw new Error("Must have a valid payload");this.data=e}},{key:"getPayload",value:function(){return this.data}},{key:"setHeaders",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":r(e))||!0===Array.isArray(e))throw new Error("Must include valid headers");this.headers=e}},{key:"getHeaders",value:function(){return this.headers}},{key:"setQueryParams",value:function(e){if(null===e)throw new Error("Must set valid query parameters");this.params=e}},{key:"getQueryParams",value:function(){return this.params}},{key:"setRetryCount",value:function(e){if(null===e||e<0)throw new Error("Cannot set an invalid retry count");this._retryCount=e}},{key:"getRetryCount",value:function(){return this._retryCount}},{key:"setDispatchInProgress",value:function(e){this._dispatchInProgress=e}},{key:"getDispatchInProgress",value:function(){return this._dispatchInProgress}}]),i}();t.default=i},function(e,t,n){var r,o;r=[t,n(81),n(12)],void 0===(o=function(e,t,o){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=t)&&n.__esModule?n:{default:n},u=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n={persistence:"memory",logInBand:!0,enabled:!0};this._options=e||n,this._statStore=t instanceof i.default?t:new i.default((0,o.getOption)("persistence",e,n)),this._enabled=(0,o.getOption)("enabled",e,n),this._logInBandModulus=1e4}return u(r,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}}]),u(r,[{key:"apply",value:function(e){if(this.enabled){var t=this.filter(e);return t?this._statStore.insertCount=this._statStore.insertCount+1:this._statStore.dropCount=this._statStore.dropCount+1,t}return this._statStore.insertCount=this._statStore.insertCount+1,!0}},{key:"filter",value:function(e){return!0}},{key:"getStatsJSON",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t={insertCount:this._statStore.insertCount,dropCount:this._statStore.dropCount,messageCount:this._statStore.messageCount,sinceTime:this._statStore.sinceTime};return e&&this._statStore.reset(),t}},{key:"shouldSendInBandLogStats",value:function(){return this._statsStore.messageCount%this.logInBandModulus==0}}]),r}();e.default=r}.apply(t,r))||(e.exports=o)},function(e,t,n){var l=n(36),c=n(17);e.exports=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,u=t.length;++i<u;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;void 0===s&&(s=e[a]),o?c(n,a,s):l(n,a,s)}return n}},function(e,t){e.exports=function(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=r(n(11)),a=r(n(24)),s=r(n(22)),l=r(n(10)),c=n(25),f=r(n(20)),h=r(n(0)),p=n(9),d=r(n(29)),y=(r(n(8)),r(n(21)));function r(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));try{n._configuration=e,n._itemStore=new a.default(n._configuration.getItemStoreIdentifier()),n._collector=t&&t.collector?t.collector:new s.default,n._transformer=t&&t.transformer?t.transformer:new d.default,n._purgeStrategy=t&&t.purgeStrategy?t.purgeStrategy:new c.DefaultPurgeStrategy(n._configuration),n._retryStrategy=t&&t.retryStrategy?t.retryStrategy:new p.DefaultRetryStrategy(n._configuration),n._dispatcher=t&&t.dispatcher?t.dispatcher:new l.default(n._retryStrategy),n._url=n._configuration.getUrl(),n._method=n._configuration.getMethod(),n._headers=n._configuration.getHeaders(),n._queryParams=n._configuration.getQueryParams(),n._timerTask=null,n._isTimerStarted=!1,n._timerTaskId=null,n._timeBetweenDispatch=n._configuration.getInterval(),n._dispatcher.setCallback(n),n._purgeStrategy.setMaxStorageInBytes(n._configuration.getMaxBytesQuota()),n.start()}catch(e){console.error("Error initializing ItemQueue",e)}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,y.default),i(r,[{key:"insert",value:function(e){if(null===e)throw new Error("Item cannot be null");0!==this._configuration.getMaxItemQueueSize()&&(this._itemStore.insert(e),this.getCurrentStorageSize()>=this._purgeStrategy.getMaxStorageInBytes()&&this._purgeStrategy.onStorageLimitExceeded(this),this.drain(!1))}},{key:"insertObject",value:function(e){if(null===e)throw new Error("Cannot insert null");var t=new u.default(e);this.insert(t)}},{key:"start",value:function(){var e=this;!1===this._isTimerStarted?(this._isTimerStarted=!0,this._timerTask=new f.default(this),this._timerTaskId=setInterval(function(){e._timerTask.sendItemsInQueue()},this._timeBetweenDispatch)):console.log("Timer task has already been started")}},{key:"stop",value:function(){!0===this._isTimerStarted?(this._isTimerStarted=!1,clearInterval(this._timerTaskId)):console.log("Timer task has already been stopped")}},{key:"getCurrentStorageSize",value:function(){return this._itemStore.getCurrentStorageSize()}},{key:"buildNetworkRequest",value:function(e,t,n,r,o,i){var u=new h.default;try{var a=e.transform(o,r,i);u.setUrl(n),u.setMethod(t),u.setPayload(a.getBody()),u.setQueryParams(a.getQueryParams()),u.setHeaders(a.getHeaders())}catch(e){console.error("Error building network request",e)}return u}},{key:"drain",value:function(e){this.retryRequest(),null===e&&(e=!0);var t=this._collector.collect(this._itemStore,this._configuration,e);if(0!==t.length){var n=[];t.forEach(function(e){n.push({object:e.getDataBlob(),timestamp:e.getTimestamp()})});var r=this.buildNetworkRequest(this._transformer,this._method,this._url,this._queryParams,this._headers,n);r.setDispatchInProgress(!0),this._itemStore.deleteItems(t),this._itemStore.insertNetworkRequest(r),this._dispatcher.dispatch(r)}}},{key:"retryRequest",value:function(){this._itemStore.getNetworkRequestNotInProgress(2).forEach(function(e){var t=new h.default(e.url,e.method,e.data,e.headers,e.params);if(t.setRetryCount(e._retryCount),t.setId(e._id),this._retryStrategy&&this._retryStrategy.maxRetryCountExceeded(t))this._purgeStrategy.onRetryCountExceeded(this,t),this._itemQueueCallback&&"function"==typeof this._itemQueueCallback.onError&&this._itemQueueCallback.onError(this,t,Error("Retry count exceeded"));else{var n=t.getRetryCount()+1;t.setRetryCount(n),this._dispatcher.dispatch(t)}},this)}},{key:"_purgeAll",value:function(){this._itemStore.purgeAll()}},{key:"setMethod",value:function(e){if(null===e||"string"!=typeof e)throw new Error("Please give a valid HTTP method");this._method=e}},{key:"getMethod",value:function(){return this._method}},{key:"setUrl",value:function(e){if(null===e||"string"!=typeof e)throw new Error("Please give a valid url");this._url=e}},{key:"getUrl",value:function(){return this._url}},{key:"setHeaders",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":o(e))||!0===Array.isArray(e))throw new Error("Please give valid HTTP headers");this._headers=e}},{key:"getHeaders",value:function(){return this._headers}},{key:"setQueryParams",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":o(e))||!0===Array.isArray(e))throw new Error("Please use valid query parameters");this._queryParams=e}},{key:"getQueryParams",value:function(){return this._queryParams}},{key:"setTransformer",value:function(e){this._transformer=e}},{key:"getTransformer",value:function(){return this._transformer}},{key:"_getDispatcher",value:function(){return this._dispatcher}},{key:"_getItemStore",value:function(){return this._itemStore}},{key:"getItemQueueCallback",value:function(){return this._itemQueueCallback}},{key:"setItemQueueCallback",value:function(e){this._itemQueueCallback=e}},{key:"dispatchInitiated",value:function(e,t){this._itemQueueCallback&&"function"==typeof this._itemQueueCallback.onPrepareNetworkRequest&&this._itemQueueCallback.onPrepareNetworkRequest(this,t),this.updateNetworkRequestDispatchStatus(t,!0)}},{key:"dispatchSuccess",value:function(e,t,n){this._itemStore.deleteNetworkRequest(t),this._itemQueueCallback&&"function"==typeof this._itemQueueCallback.onSuccess&&this._itemQueueCallback.onSuccess(this,t)}},{key:"dispatchFailed",value:function(e,t,n){this.updateNetworkRequestDispatchStatus(t,!1);try{this._retryStrategy.onSendFailed(this,t,n)}catch(n){this._itemQueueCallback&&"function"==typeof this._itemQueueCallback.onError&&this._itemQueueCallback.onError(this,t,n)}this._itemQueueCallback&&"function"==typeof this._itemQueueCallback.onError&&this._itemQueueCallback.onError(this,t,n)}},{key:"updateNetworkRequestDispatchStatus",value:function(e,t){e.setDispatchInProgress(t),this._itemStore.updateNetworkRequest(e)}}]),r}();t.default=v},function(e,t,n){var u=n(76),a=n(75);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||a(o)}},function(e,t,n){var r=n(18);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(114),o=n(89)(function(e,t,n){r(e,t,n)});e.exports=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function o(e){return e&&e.__esModule?e:{default:e}}o(n(0)),o(n(4));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"onPrepareNetworkRequest",value:function(e,t){}},{key:"onSuccess",value:function(e,t){}},{key:"onError",value:function(e,t,n){}}]),e}();t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultRetryStrategy=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function o(e){return e&&e.__esModule?e:{default:e}}o(n(0)),o(n(4)),t.DefaultRetryStrategy=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._maxRetryCount=e.getMaxRetries(),this._requestTimeout=e.getRequestTimeout()}return r(t,[{key:"setMaxRetryCount",value:function(e){if(e<0||null===e||"number"!=typeof e)throw new Error("Use valid integer for max retry count");this._maxRetryCount=e}},{key:"getMaxRetryCount",value:function(){return this._maxRetryCount}},{key:"setRequestTimeout",value:function(e){if(e<0||null===e||"number"!=typeof e)throw new Error("Use valid integer for max timeout");this._requestTimeout=e}},{key:"getRequestTimeout",value:function(){return this._requestTimeout}},{key:"maxRetryCountExceeded",value:function(e){return!!e&&e.getRetryCount()>=this.getMaxRetryCount()}},{key:"onSendFailed",value:function(e,t,n){t.setDispatchInProgress(!1),e._getItemStore().updateNetworkRequest(t)}}]),t}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=u(n(57));n(55);var i=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}u(n(21));var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._retryStrategy=e||new i.default,this._dispatcherCallback=null}return r(t,[{key:"setCallback",value:function(e){this._dispatcherCallback=e}},{key:"transmitNetworkRequest",value:function(e){return new Promise(function(t,n){(0,o.default)(e.getUrl(!0),{body:e.getPayload(),cache:"no-cache",credentials:"include",headers:e.getHeaders(),method:"POST",mode:"cors",redirect:"error",referrer:"no-referrer"}).then(function(e){if(!1===e.ok)throw new Error("HTTP Bad Response:"+JSON.stringify(e));t(e)}).catch(function(e){n(e)})})}},{key:"dispatch",value:function(t){var n=this;if(null!==t)return this._dispatcherCallback&&this._dispatcherCallback.dispatchInitiated(this,t),this.transmitNetworkRequest(t).then(function(e){n._dispatcherCallback.dispatchSuccess(n,t,e)}).catch(function(e){n._dispatcherCallback.dispatchFailed(n,t,e)})}}]),t}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(5);(r=i)&&r.__esModule;var u=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._id=void 0,this._timestamp=t||(new Date).getTime(),this._dataBlob=e||""}return o(n,[{key:"setDataBlob",value:function(e){this._dataBlob=e}},{key:"getDataBlob",value:function(){return this._dataBlob}},{key:"setId",value:function(e){if("string"!=typeof e||""===e||null===e)throw new Error("Must use valid ID format");this._id=e}},{key:"getId",value:function(){return this._id}},{key:"setTimestamp",value:function(e){if(null===e||"number"!=typeof e)throw new Error("Must use valid timestamp");this._timestamp=e}},{key:"getTimestamp",value:function(){return this._timestamp}}]),n}();t.default=u},function(e,t,n){var r;void 0===(r=function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getOption=function(e,t,n){var r=n&&n.hasOwnProperty(e)?n[e]:void 0;return t&&t.hasOwnProperty(e)?t[e]:r}}.apply(t,[t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",FATAL:"fatal"}}.apply(t,[t]))||(e.exports=r)},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t){e.exports=function(t,n){return function(e){return t(n(e))}}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(n=window)}e.exports=n},function(e,t,n){var r=n(108);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=1048576,u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._itemStoreIdentifier=e&&e.itemStoreIdentifier?e.itemStoreIdentifier:"RTDefault",this._maxRetries=e&&e.maxRetries?e.maxRetries:3,this._maxItemQueueSize=e&&e.maxItemQueueSize?e.maxItemQueueSize:2e3,this._interval=e&&e.interval?e.interval:3e4,this._maxBytesQuota=e&&e.maxBytesQuota?e.maxBytesQuota:i,this._retryStrategy=e&&e.retryStrategy?e.retryStrategy:"DefaultRetryStrategy",this._purgeStrategy=e&&e.purgeStrategy?e.purgeStrategy:"Purge",this._requestTimeout=e&&e.requestTimeout?e.requestTimeout:3e3,this._url=e&&e.url?e.url:"localhost",this._method=e&&e.method?e.method:"post",this._headers=e&&e.headers?e.headers:{},this._queryParams=e&&e.queryParams?e.queryParams:{},this.OVERRIDE_LIMIT_ENFORCED=!1,this.minimumMaxItemQueueSize=64,this.minimumMaxBytesQuota=102400,this.minimumMaxRetryCount=2,this.minimumRequestTimeout=1e3,this.minimumInterval=1e4}return o(t,[{key:"setItemStoreIdentifier",value:function(e){if("string"!=typeof e||null===e)throw"Please use a valid string for queue name";this._itemStoreIdentifier=e}},{key:"getItemStoreIdentifier",value:function(){return this._itemStoreIdentifier}},{key:"setMaxItemQueueSize",value:function(e){if(e<1||null===e)throw"Maximum item queue size should be at the minimum 1.";!0===this.OVERRIDE_LIMIT_ENFORCED?this._maxItemQueueSize=e:e<this.minimumMaxItemQueueSize?(console.error("This value is less than the recommended size of "+this.minimumMaxItemQueueSize+" events. Setting to default value 2000."),this._maxItemQueueSize=2e3):this._maxItemQueueSize=e}},{key:"getMaxItemQueueSize",value:function(){return this._maxItemQueueSize}},{key:"setRequestTimeout",value:function(e){if(e<1||null===e)throw"Maximum retry timeout should be at the minimum 1ms.";!0===this.OVERRIDE_LIMIT_ENFORCED?this._requestTimeout=e:e<this.minimumRequestTimeout?(console.error("This value is less than the recommended time of "+this.minimumRequestTimeout+". Setting to default value 3000."),this._requestTimeout=3e3):this._requestTimeout=e}},{key:"getRequestTimeout",value:function(){return this._requestTimeout}},{key:"setInterval",value:function(e){if(e<1||null===e)throw"Time interval should be at the minimum 1ms.";!0===this.OVERRIDE_LIMIT_ENFORCED?this._interval=e:e<this.minimumInterval?(console.error("This value is less than the recommended time of "+this.minimumInterval+". Setting to default value 30000."),this._interval=3e4):this._interval=e}},{key:"getInterval",value:function(){return this._interval}},{key:"setMaxRetries",value:function(e){if(e<0||null===e)throw"Maximum retries should be at the minimum 0.";!0===this.OVERRIDE_LIMIT_ENFORCED?this._maxRetries=e:e<this.minimumMaxRetryCount?(console.error("This value is less than the recommended retries of "+this.minimumMaxRetryCount+". Setting to default value 3."),this._maxRetries=3):this._maxRetries=e}},{key:"getMaxRetries",value:function(){return this._maxRetries}},{key:"setMaxBytesQuota",value:function(e){if(e<0||null===e)throw"Maximum bytes quota should be at the minimum 0.";!0===this.OVERRIDE_LIMIT_ENFORCED?this._maxBytesQuota=e:e<this.minimumMaxBytesQuota?(console.error("This value is less than the recommended bytes quota of "+this.minimumMaxBytesQuota+". Setting to default value "+i+"."),this._maxBytesQuota=i):this._maxBytesQuota=e}},{key:"getMaxBytesQuota",value:function(){return this._maxBytesQuota}},{key:"setPurgeStrategy",value:function(e){this._purgeStrategy=e}},{key:"getPurgeStrategy",value:function(){return this._purgeStrategy}},{key:"setRetryStrategy",value:function(e){this._retryStrategy=e}},{key:"getRetryStrategy",value:function(){return this._retryStrategy}},{key:"setUrl",value:function(e){if(null===e||"string"!=typeof e||""===e)throw"Please use a valid URL";this._url=e}},{key:"getUrl",value:function(){return this._url}},{key:"setMethod",value:function(e){if(null===e||"string"!=typeof e||""===e)throw"Please use a valid HTTP method";this._method=e}},{key:"getMethod",value:function(){return this._method}},{key:"setHeaders",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":r(e))||!0===Array.isArray(e))throw"Please use valid headers";this._headers=e}},{key:"getHeaders",value:function(){return this._headers}},{key:"setQueryParams",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":r(e))||!0===Array.isArray(e))throw"Please use valid query params";this._queryParams=e}},{key:"getQueryParams",value:function(){return this._queryParams}}]),t}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._itemQueue=e}return r(t,[{key:"sendItemsInQueue",value:function(){return this._itemQueue.drain(!0)}}]),t}();t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function o(e){return e&&e.__esModule?e:{default:e}}o(n(10)),o(n(8)),o(n(0));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemQueueCallback=null}return r(e,[{key:"setCallback",value:function(e){this._itemQueueCallback=e}},{key:"dispatchSuccess",value:function(e,t,n){}},{key:"dispatchFailed",value:function(e,t,n){}},{key:"dispatchInitiated",value:function(e,t){}}]),e}();t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(24);(r=i)&&r.__esModule;var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"collect",value:function(e,t,n){return n||e.getOverallItemCount()>=t.getMaxItemQueueSize()?e.getAllItems(t.getMaxItemQueueSize()):[]}}]),e}();t.default=u},function(e,t,n){var r=n(15)(Object.keys,Object);e.exports=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(74)),u=a(n(11));function a(e){return e&&e.__esModule?e:{default:e}}a(n(0));var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._storeName=e,this._storage=this._createDB(e),this._networkRequestStorage=this._createDB(e+"NetworkRequestStorage")}return r(t,[{key:"_createDB",value:function(e){return new o.default(e)}},{key:"insert",value:function(e){var t=this._storage.insertItem({item:e.getDataBlob(),timestamp:e.getTimestamp()});e.setId(t)}},{key:"getItems",value:function(){return this.getAllItems().slice(0,this.itemQueueSize)}},{key:"getAllItems",value:function(e){var n=this._storage.getAllItems(),r=[];return Object.keys(n).forEach(function(e){var t=new u.default(n[e].item,n[e].timestamp);t.setId(e),r.push(t)}),e?r.slice(0,e):r}},{key:"getOverallItemCount",value:function(){return Object.keys(this._storage._items).length}},{key:"deleteItemById",value:function(e){return this._storage.removeItem(e.getId())}},{key:"deleteItems",value:function(e){var t=this,n=0;return e.forEach(function(e){n+=t._storage.removeItem(e.getId())}),n}},{key:"deleteItemsOlderThan",value:function(t){var n=this,r=this._storage.getAllItems(),o=0;return Object.keys(r).forEach(function(e){r[e].timestamp<t.getTimestamp()&&(o+=n._storage.removeItem(e))}),o}},{key:"deleteOldestItem",value:function(){var e=this.getAllItems(),t=e[0];e.forEach(function(e){e.getTimestamp()<t.getTimestamp()&&(t=e)}),this.deleteItemById(t)}},{key:"insertNetworkRequest",value:function(e){var t=this._networkRequestStorage.insertItem(e);e.setId(t)}},{key:"deleteNetworkRequest",value:function(e){return this._networkRequestStorage.removeItem(e.getId())}},{key:"updateNetworkRequest",value:function(e){this._networkRequestStorage.updateItem(e.getId(),e)}},{key:"getNetworkRequest",value:function(e){var t=this._networkRequestStorage.getAllItems(),n=[];return Object.keys(t).forEach(function(e){n.push(t[e])}),e?n.slice(0,e):n}},{key:"getNetworkRequestNotInProgress",value:function(e){return this.getNetworkRequest(e).filter(function(e){return 1!=e._dispatchInProgress})}},{key:"purgeAll",value:function(){this._storage._reset(),this._networkRequestStorage._reset()}},{key:"getCurrentStorageSize",value:function(){var o=[],e=function e(t){var n=0;if("boolean"==typeof t)n=4;else if("string"==typeof t)n+=2*t.length;else if("number"==typeof t)n=8;else if("object"===(void 0===t?"undefined":i(t))&&-1===o.indexOf(t))for(var r in o[o.length]=t)n+=8,n+=e(t[r]);return n};return e(this._storage)+e(this._networkRequestStorage)}}]),t}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPurgeStrategy=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function o(e){return e&&e.__esModule?e:{default:e}}o(n(0)),o(n(4)),o(n(19)),t.DefaultPurgeStrategy=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._maxStorageInBytes=e.getMaxBytesQuota()}return r(t,[{key:"setMaxStorageInBytes",value:function(e){if(e<0||null===e||"number"!=typeof e)throw new Error("Use valid integer for byte maximum of storage");this._maxStorageInBytes=e}},{key:"getMaxStorageInBytes",value:function(){return this._maxStorageInBytes}},{key:"onRetryCountExceeded",value:function(e,t){e._getItemStore().deleteNetworkRequest(t)}},{key:"onStorageLimitExceeded",value:function(e){e._getItemStore().deleteOldestItem()}}]),t}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.assignCI=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n||n.length<1)return e;var o={};for(var i in e)o[i.toLowerCase()]=i;for(var u=0;u<n.length;u++)for(var a in n[u]){var s=a,l=a.toLowerCase();o.hasOwnProperty(l)?s=o[l]:o[l]=a,e[s]=n[u][a]}return e},t.paramsToQueryString=function(n){return Object.keys(n).map(function(e){var t=null===n[e]?"":n[e];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"formatPostBody",value:function(e){return JSON.stringify(e)}}]),e}();t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._headers=e,this._queryParams=t,this._body=n}return o(r,[{key:"getHeaders",value:function(){return this._headers}},{key:"setHeaders",value:function(e){this._headers=e}},{key:"getQueryParams",value:function(){return this._queryParams}},{key:"setQueryParams",value:function(e){this._queryParams=e}},{key:"getBody",value:function(){return this._body}},{key:"setBody",value:function(e){this._body=e}}]),r}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(28)),i=a(n(27)),u=n(26);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queryParams={},this._contentType="application/json",this._headers={"Content-Type":this._contentType},this._JSONPostBodyEncoder=new i.default}return r(e,[{key:"setHeaders",value:function(e){this._headers=e}},{key:"getHeaders",value:function(){return this._headers}},{key:"setQueryParams",value:function(e){this._queryParams=e}},{key:"getQueryParams",value:function(){return this._queryParams}},{key:"setContentType",value:function(e){if(null===e)throw new Error("Cannot set MIME type to null");this._contentType=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"formatPostBody",value:function(e){return this._JSONPostBodyEncoder.formatPostBody(e)}},{key:"transform",value:function(e,t,n){if(null===n)throw new Error("List of items cannot be null");var r;return this._headers=(0,u.assignCI)(this._headers,e),this._queryParams=(0,u.assignCI)(this._queryParams,t),r=this.formatPostBody(n),new o.default(this._headers,this._queryParams,r)}}]),e}();t.default=s},function(e,t,n){var r=v(n(29)),o=v(n(25)),i=v(n(9)),u=v(n(10)),a=v(n(22)),s=v(n(19)),l=v(n(4)),c=v(n(11)),f=v(n(28)),h=v(n(8)),p=v(n(20)),d=v(n(27)),y=v(n(0));function v(e){return e&&e.__esModule?e:{default:e}}e.exports={BaseHTTPTransformer:r.default,DefaultPurgeStrategy:o.default,DefaultRetryStrategy:i.default,DefaultDispatcher:u.default,DefaultCollector:a.default,RTConfiguration:s.default,ItemQueue:l.default,Item:c.default,ItemQueueCallback:h.default,HTTPTransformResult:f.default,DispatchTimerTask:p.default,JSONPostBodyEncoder:d.default,NetworkRequest:y.default}},function(e,t,n){var r,o;r=[t,n(7),n(5)],void 0===(o=function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0});var o=r(t),u=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function i(e,t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.component=o.component,this.appId=o.appId,this.timestamp=(new Date).getTime(),this.level=t,this.env=o.env,this.transactionId=(0,u.default)(),this.annotation={message:e||""},this._initLogMessage(n,r)}return a(i,[{key:"_initLogMessage",value:function(e,t){if(null!==e){var n=this._getExceptionText(e,e.constructor.name),r=this._formatExceptionObj(e,n,e.constructor.name);this.annotation.exception=r}null!==t&&(this.annotation=(0,o.default)({},t,this.annotation))}},{key:"_getExceptionText",value:function(e,t){return e&&e.message&&e.stack?"message="+e.message+"; stack="+e.stack:e&&"Error"===t?"message="+e.toString():""}},{key:"_formatExceptionObj",value:function(e,t,n){var r={};return r.type="Error"===n?"error":"exception",r.text=t,r}}]),i}();e.default=i}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(7),n(34),n(31),n(30),n(52),n(33)],void 0===(o=function(e,t,n,r,o,i,u){Object.defineProperty(e,"__esModule",{value:!0});var a=p(t),s=p(n),l=p(r),c=p(o),f=p(i),h=p(u);function p(e){return e&&e.__esModule?e:{default:e}}var d="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},y=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),v=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);try{this._configuration=e||{},this._providerProps=s.default.getProviderProps(e),this._RTSettings=s.default.getRTSettings(e),this._providerName=e.providerName,this._component=e.component,this._appId=e.appId,this._env=e.env,this._RTConfig=new c.default.RTConfiguration,this._RTConfig.setHeaders((0,a.default)({},this._RTConfig.getHeaders(),{"-X-APPID":this._appId})),this._endpoint=s.default.getEndpointUrl(this._configuration.endpoint),this._initReliableTransmission(),this._filter=new h.default(this._configuration.filtering),this._logInBand=!1}catch(e){console.error("Error in "+this._providerName+": ",e)}}return y(t,[{key:"_initReliableTransmission",value:function(){null!==this._RTSettings&&(void 0!==this._RTSettings.overrideLimitEnforcement&&(this._RTConfig.OVERRIDE_LIMIT_ENFORCED=this._RTSettings.overrideLimitEnforcement),this._RTSettings.maxItems&&this._RTConfig.setMaxItemQueueSize(this._RTSettings.maxItems),this._RTSettings.interval&&this._RTConfig.setInterval(this._RTSettings.interval),this._RTSettings.maxRetries&&this._RTConfig.setMaxRetries(this._RTSettings.maxRetries),this._RTSettings.maxBytesQuota&&this._RTConfig.setMaxBytesQuota(this._RTSettings.maxBytesQuota),this._RTSettings.requestTimeout&&this._RTConfig.setRequestTimeout(this._RTSettings.requestTimeout),this._RTSettings.retryStrategy&&this._RTConfig.setRetryStrategy(this._RTSettings.retryStrategy),this._RTSettings.purgeStrategy&&this._RTConfig.setPurgeStrategy(this._RTSettings.purgeStrategy)),this._RTConfig.setHeaders((0,a.default)({},this._RTConfig.getHeaders(),this._configuration.endpoint.headers)||{}),this._RTConfig.setQueryParams(this._configuration.endpoint.query||{}),this._RTConfig.setItemStoreIdentifier(this._providerName+"Logging"),this._RTConfig.setMethod("post"),this._RTConfig.setUrl(this._endpoint),this._itemQueue=new c.default.ItemQueue(this._RTConfig),this._itemQueue.setTransformer(new f.default)}},{key:"log",value:function(e,t,n,r,o){null===e&&(e="");var i=s.default.mergeProps(n,r,this._providerProps,t),u=new l.default(e,t,o,i,{component:this._component,appId:this._appId,env:this._env});if(this._filter.apply(u)&&this._itemQueue.insertObject(u),this.logInBand&&this._filter.shouldSendInBandLogStats()){var a=new l.default("filter stats","info",null,this._filter.getStatsJSON(),{component:this._component,appId:this._appId,env:this._env});this._itemQueue.insertObject(a)}}},{key:"setEndpoint",value:function(e){var t=this._configuration.endpoint;if("object"===(void 0===e?"undefined":d(e)))for(var n in e)t[n]&&(t[n]=e[n]);else if("string"==typeof e){var r=s.default.parseURL(e);for(var o in r)t[o]&&(t[o]=r[o])}this._configuration.endpoint=t}},{key:"notifyTransmitStatus",value:function(e){this._itemQueue._dispatcher.setCallback(e)}},{key:"filter",get:function(){return this._filter},set:function(e){this._filter=e}},{key:"logInBand",get:function(){return this._logInBand},set:function(e){this._logInBand=e}}]),t}();e.default=v}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(1),n(80),n(79),n(78),n(77)],void 0===(o=function(e,t,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var u=a(t),s=a(n),l=a(r),c=a(o),f=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var h="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},p=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),d=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));if(e&&e.filters&&Array.isArray(e.filters)&&!t){t=[];for(var r=0;r<e.filters.length;r++)if(e.filters[r].hasOwnProperty("type")){var o=e.filters[r];if(e&&e.stats&&"object"===h(e.stats))for(var i in e.stats)o[i]=e.stats[i];var u=a.createFilter(e.filters[r].type,o,n._statsStore);t.push(u)}}return n._filters=t||[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u.default),p(a,[{key:"filters",get:function(){return this._filters},set:function(e){this._filters=e}}],[{key:"createFilter",value:function(e,t,n){var r=null;switch(e){case"levelFilter":r=new f.default(t,n);break;case"regexFilter":r=new c.default(t,n);break;case"equalProbabilitySampler":r=new s.default(t,n);break;case"systematicSampler":r=new l.default(t,n);break;default:r=new u.default(t,n)}return r}}]),p(a,[{key:"shouldSendInBandLogStats",value:function(){return 0<this._filters.length&&this._statsStore.messageCount%this.logInBandModulus==0}},{key:"appendFilter",value:function(e){this.filters.push(e)}},{key:"filter",value:function(e){for(var t=this._filters.length,n=!1,r=0;r<t;r++)n=n||this._filters[r].filter(e);return!(0<r)||n}}]),a}();e.default=d}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(7)],void 0===(o=function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=t)&&n.__esModule?n:{default:n},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function h(e,t){var n=443==t&&("https"===e||"https:"===e)||80==t&&("http"===e||"http:"===e)||null===t||""===t?"":""+t,r=parseInt(n,10);return(isNaN(r)||t<=0||65535<=t||Math.floor(r)!=t)&&(n=""),n}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"mergeProps",value:function(e,t,n,r){return e||(e={}),n||(n={}),t||(t={}),(0,o.default)({},e,n,t)}},{key:"getProviderProps",value:function(e){var t={},n=e.addProps;return n&&(t=n),t}},{key:"getRTSettings",value:function(e){var t=null,n=e.reliableTransmission;return n&&(t=n),t}},{key:"parseURL",value:function(e){var t=null;if(window&&window.URL&&"function"==typeof window.URL)t=new window.URL(e);else{var n=e.split("#"),r=n[0].split("?"),o=1<r.length?r[1]:"";if(!(3<=(n=(n=r[0]).split("/")).length))throw"LoggingProviderUtils.parseURL Error: url "+e+" appears malformed";var i=n[2],u=i.split(":"),a=u[0],s=n[0],l=h(s,1<u.length?u[1]:"");""===l&&(i=a);var c=n.slice(3).join("/");t={host:i,hostname:a,protocol:s,port:l,search:o?"?"+o:"",pathname:"/"+c}}var f={host:t.hostname,protocol:t.protocol.replace(/[^a-zA-Z]/g,""),pathname:t.pathname};return""!==t.port&&(f.port=t.port),f}},{key:"formatURL",value:function(e){var t=h(e.protocol,e.port),n=e.pathname,r="";return t&&(r=":"+t),n&&"string"==typeof n&&0<n.length&&"/"!==n[0]&&(n="/"+n),e.protocol+"://"+e.hostname+r+n}},{key:"getEndpointUrl",value:function(e){return t.formatURL({protocol:e.protocol||"http",hostname:e.host||"",port:e.port,pathname:e.basepath||""})}}]),t}();e.default=i}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(13),n(34),n(33)],void 0===(o=function(e,t,n,r){Object.defineProperty(e,"__esModule",{value:!0});var u=i(t),a=i(n),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._configuration=e||{},this._providerProps=a.default.getProviderProps(e),this._setupLogger(),this._filter=new o.default(this._providerProps.filters)}return s(t,[{key:"_setupLogger",value:function(){this._logger={log:function(e,t,n){console.log&&(null!==n&&c(t)?console.log(e,t,n):c(t)?console.log(e,t):console.log(e))},debug:function(e,t,n){console.debug&&(null!==n&&c(t)?console.log(e,t,n):c(t)?console.log(e,t):console.log(e))},warn:function(e,t,n){console.warn&&(null!==n&&c(t)?console.warn(e,t,n):c(t)?console.warn(e,t):console.warn(e))},error:function(e,t,n){console.error&&(null!==n&&c(t)?console.error(e,t,n):c(t)?console.error(e,t):console.error(e))}}}},{key:"log",value:function(e,t,n,r,o){this._log(t,e,n,r,o)}},{key:"_log",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=arguments[3],o=arguments[4];if("undefined"==typeof window||window.console){var i=a.default.mergeProps(n,r,this._providerProps,e);if(this._filter.apply({message:t,level:e}))switch(e){case u.default.INFO:this._logger.log(t,i,o);break;case u.default.DEBUG:this._logger.debug(t,i,o);break;case u.default.WARN:this._logger.warn(t,i,o);break;case u.default.ERROR:case u.default.FATAL:this._logger.error(t,i,o)}}}}]),t}();function c(e){return e&&void 0!==e&&0<Object.keys(e).length}e.default=l}.apply(t,r))||(e.exports=o)},function(e,t,n){var o=n(17),i=n(18),u=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var r=e[t];u.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}},function(e,t){e.exports=function(e,t){if("__proto__"!=t)return e[t]}},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(e){return null!=e&&"object"==_typeof(e)}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(40),o=n(3);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(15)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(98),o=n(43),i=n(97);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(102),o="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,u,a){(function(e){var t=a(46),n="object"==_typeof(u)&&u&&!u.nodeType&&u,r=n&&"object"==_typeof(e)&&e&&!e.nodeType&&e,o=r&&r.exports===n?t.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}).call(this,a(103)(e))},function(e,t,n){var r=n(17),o=n(18);e.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(113),o=n(112),i=n(111),u=n(110),a=n(109);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=u,s.prototype.set=a,e.exports=s},function(e,t,n){var r;void 0===(r=function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hashCode=function(e){var t=0,n=e.length,r=0;if(0<n)for(;r<n;)t=(t<<5)-t+e.charCodeAt(r++)|0;return t}}.apply(t,[t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return!0}}.apply(t,[t]))||(e.exports=r)},function(e,t,n){var r,o;r=[t,n(30),n(5)],void 0===(o=function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n)&&r.__esModule?r:{default:r},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t.BaseHTTPTransformer),i(r,[{key:"transform",value:function(e,t,n){return e||(e={}),this.addHeaders(e),function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"transform",this).call(this,e,t,n)}},{key:"formatPostBody",value:function(e){var t=[];e.forEach(function(e){t.push(e.object)});for(var n=encodeURIComponent(JSON.stringify(t)).split(""),r=[],o=0;o<n.length;o++)"%"===n[o]?(r.push(parseInt(n[o+1]+n[o+2],16)),o+=2):r.push(n[o].charCodeAt(0));return new Uint8Array(r)}},{key:"addHeaders",value:function(e){var t=(0,o.default)();e["-X-INTUIT_TID"]=t,e.intuit_tid=t}}]),r}();e.default=u}.apply(t,r))||(e.exports=o)},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var s,l=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&p())}function p(){if(!c){var e=a(h);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(N,U){var e;e=function(){function l(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,o=void 0,a=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(o?o(p):_())},e="undefined"!=typeof window?window:void 0,i=e||{},u=i.MutationObserver||i.WebKitMutationObserver,s="undefined"==typeof self&&void 0!==N&&"[object process]"==={}.toString.call(N),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;r=0}var d,y,v,g,_=void 0;function m(e,t){var n=this,r=new this.constructor(k);void 0===r[w]&&D(r);var o=n._state;if(o){var i=arguments[o-1];a(function(){return L(o,r,i,n._result)})}else M(n,r,e,t);return r}function b(e){if(e&&"object"==_typeof(e)&&e.constructor===this)return e;var t=new this(k);return C(t,e),t}_=s?function(){return N.nextTick(p)}:u?(y=0,v=new u(p),g=document.createTextNode(""),v.observe(g,{characterData:!0}),function(){g.data=y=++y%2}):c?((d=new MessageChannel).port1.onmessage=p,function(){return d.port2.postMessage(0)}):void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:f()}catch(e){return f()}}():f();var w=Math.random().toString(36).substring(2);function k(){}var S=void 0,P=1,O=2,x={error:null};function T(e){try{return e.then}catch(e){return x.error=e,x}}function I(e,t,n){var u,r,o,i;t.constructor===e.constructor&&n===m&&t.constructor.resolve===b?(o=e,(i=t)._state===P?E(o,i._result):i._state===O?R(o,i._result):M(i,void 0,function(e){return C(o,e)},function(e){return R(o,e)})):n===x?(R(e,x.error),x.error=null):void 0===n?E(e,t):l(n)?(u=t,r=n,a(function(o){var i=!1,e=function(e,t,n,r){try{e.call(t,function(e){i||(i=!0,u!==e?C(o,e):E(o,e))},function(e){i||(i=!0,R(o,e))})}catch(e){return e}}(r,u,0,0,o._label);!i&&e&&(i=!0,R(o,e))},e)):E(e,t)}function C(e,t){var n,r;e===t?R(e,new TypeError("You cannot resolve a promise with itself")):(r=_typeof(n=t),null===n||"object"!==r&&"function"!==r?E(e,t):I(e,t,T(t)))}function j(e){e._onerror&&e._onerror(e._result),A(e)}function E(e,t){e._state===S&&(e._result=t,e._state=P,0!==e._subscribers.length&&a(A,e))}function R(e,t){e._state===S&&(e._state=O,e._result=t,a(j,e))}function M(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+P]=n,o[i+O]=r,0===i&&e._state&&a(A,e)}function A(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,u=0;u<t.length;u+=3)r=t[u],o=t[u+n],r?L(n,r,o,i):o(i);e._subscribers.length=0}}function L(e,t,n,r){var o=l(n),i=void 0,u=void 0,a=void 0,s=void 0;if(o){if((i=function(e,t){try{return e(t)}catch(e){return x.error=e,x}}(n,r))===x?(s=!0,u=i.error,i.error=null):a=!0,t===i)return void R(t,new TypeError("A promises callback cannot return that same promise."))}else i=r,a=!0;t._state!==S||(o&&a?C(t,i):s?R(t,u):e===P?E(t,i):e===O&&R(t,i))}var B=0;function D(e){e[w]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var Q=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[w]||D(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&E(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var o=T(t);if(o===m&&t._state!==S)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===q){var i=new n(k);I(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===S&&(this._remaining--,e===O?R(r,n):this._result[t]=n),0===this._remaining&&E(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,function(e){return n._settledAt(P,t,e)},function(e){return n._settledAt(O,t,e)})},e}(),q=function(){function t(e){this[w]=B++,this._result=this._state=void 0,this._subscribers=[],k!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){C(t,e)},function(e){R(t,e)})}catch(e){R(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return l(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return q.prototype.then=m,q.all=function(e){return new Q(this,e).promise},q.race=function(o){var i=this;return n(o)?new i(function(e,t){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(e,t)}):new i(function(e,t){return t(new TypeError("You must pass an array to race."))})},q.resolve=b,q.reject=function(e){var t=new this(k);return R(t,e),t},q._setScheduler=function(e){o=e},q._setAsap=function(e){a=e},q._asap=a,q.polyfill=function(){var e=void 0;if(void 0!==U)e=U;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=q},q.Promise=q},t.exports=e()}).call(this,n(53),n(16))},function(e,t,n){e.exports=n(54).polyfill()},function(e,t,n){n.r(t),n.d(t,"Headers",function(){return l}),n.d(t,"Request",function(){return v}),n.d(t,"Response",function(){return _}),n.d(t,"DOMException",function(){return b}),n.d(t,"fetch",function(){return w});var a={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(a.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&-1<r.indexOf(Object.prototype.toString.call(e))};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function s(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a.iterable&&(e[Symbol.iterator]=function(){return e}),e}function l(t){this.map={},t instanceof l?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function h(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){var t;(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:a.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a.arrayBuffer&&a.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,n,r=c(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=i(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},l.prototype.delete=function(e){delete this.map[i(e)]},l.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},l.prototype.set=function(e,t){this.map[i(e)]=u(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),s(n)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),s(t)},l.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),s(n)},a.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n,r,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),-1<y.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function g(e){var o=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");o.append(decodeURIComponent(n),decodeURIComponent(r))}}),o}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},d.call(v.prototype),d.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];_.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})};var b=self.DOMException;try{new b}catch(e){(b=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),b.prototype.constructor=b}function w(o,u){return new Promise(function(r,e){var t=new v(o,u);if(t.signal&&t.signal.aborted)return e(new b("Aborted","AbortError"));var i=new XMLHttpRequest;function n(){i.abort()}i.onload=function(){var e,o,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",o=new l,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();o.append(n,r)}}),o)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var n="response"in i?i.response:i.responseText;r(new _(n,t))},i.onerror=function(){e(new TypeError("Network request failed"))},i.ontimeout=function(){e(new TypeError("Network request failed"))},i.onabort=function(){e(new b("Aborted","AbortError"))},i.open(t.method,t.url,!0),"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),"responseType"in i&&a.blob&&(i.responseType="blob"),t.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",n),i.onreadystatechange=function(){4===i.readyState&&t.signal.removeEventListener("abort",n)}),i.send(void 0===t._bodyInit?null:t._bodyInit)})}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=l,self.Request=v,self.Response=_)},function(e,t,n){n(56),e.exports=self.fetch.bind(self)},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(e){return e}},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(15)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(2),o=n(65);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(2),o=n(67);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(2),o=n(14);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(2),o=n(23);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var g=n(49),_=n(71),m=n(36),b=n(70),w=n(69),k=n(47),S=n(45),P=n(68),O=n(66),x=n(64),T=n(63),I=n(62),C=n(61),j=n(60),E=n(44),R=n(42),M=n(38),A=n(59),L=n(3),B=n(58),D=n(23),Q="[object Arguments]",q="[object Function]",N="[object Object]",U={};U[Q]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object DataView]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Map]"]=U["[object Number]"]=U[N]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object Symbol]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Error]"]=U[q]=U["[object WeakMap]"]=!1,e.exports=function n(r,o,i,e,t,u){var a,s=1&o,l=2&o,c=4&o;if(i&&(a=t?i(r,e,t,u):i(r)),void 0!==a)return a;if(!L(r))return r;var f=R(r);if(f){if(a=C(r),!s)return S(r,a)}else{var h=I(r),p=h==q||"[object GeneratorFunction]"==h;if(M(r))return k(r,s);if(h==N||h==Q||p&&!t){if(a=l||p?{}:E(r),!s)return l?O(r,w(a,r)):P(r,b(a,r))}else{if(!U[h])return t?r:{};a=j(r,h,s)}}u||(u=new g);var d=u.get(r);if(d)return d;if(u.set(r,a),B(r))return r.forEach(function(e){a.add(n(e,o,i,e,r,u))}),a;if(A(r))return r.forEach(function(e,t){a.set(t,n(e,o,i,t,r,u))}),a;var y=c?l?T:x:l?keysIn:D,v=f?void 0:y(r);return _(v||r,function(e,t){v&&(e=r[t=e]),m(a,t,n(e,o,i,t,r,u))}),a}},function(e,t,n){var r=n(72);e.exports=function(e){return r(e,5)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DELIMITER=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=u(n(73)),i=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var a=t.DELIMITER="_",s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._storageName=e,this._items={},this._loadFromStorage()}return r(t,[{key:"getItem",value:function(e){var t;if(t=this._items[e]?(0,o.default)(this._items[e]):null)return t}},{key:"insertItem",value:function(e){var t=""+this._storageName+a+(0,i.default)();return this._items[t]=e,localStorage&&localStorage.setItem(t,JSON.stringify(e)),t}},{key:"updateItem",value:function(e,t){if(this._items[e])return this._items[e]=t,localStorage&&localStorage.setItem(e,JSON.stringify(t)),e}},{key:"removeItem",value:function(e){if(this._items[e])return delete this._items[e],localStorage&&localStorage.removeItem(e),1}},{key:"getAllItems",value:function(){var n=this;return Object.keys(this._items).filter(function(e){return e.substring(0,(""+n._storageName+a).length)===""+n._storageName+a}).reduce(function(e,t){return e[t]=n._items[t],e},{})}},{key:"_reset",value:function(){var t=this,e=Object.keys(this._items).filter(function(e){delete t._items[e],localStorage&&localStorage.removeItem(e)});console.log("Deleted "+e.length+" items from persistent local storage. Storage is now reset.")}},{key:"_loadFromStorage",value:function(){var t=this;localStorage&&(this._items=Object.keys(localStorage).filter(function(e){return e.substring(0,(""+t._storageName+a).length)===""+t._storageName+a}).reduce(function(e,t){var n=localStorage?localStorage.getItem(t):null,r=void 0;try{r=n?JSON.parse(n):null}catch(e){console.error("storage.get(): JSON.parse error."),r=n}return e[t]=r,e},{}))}}]),t}();t.default=s},function(e,t){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=o;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}},function(i,e,t){(function(e){var t,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);t=function(){return n.getRandomValues(r),r}}if(!t){var o=new Array(16);t=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}i.exports=t}).call(this,t(16))},function(e,t,n){var r,o;r=[t,n(1),n(12)],void 0===(o=function(e,t,o){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=t)&&n.__esModule?n:{default:n},u=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n._levels=(0,o.getOption)("levels",e,{levels:["debug","info","warn","error","fatal"]}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.default),u(r,[{key:"filter",value:function(e){return 0<=this._levels.indexOf(e.level)}}]),r}();e.default=r}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(1),n(12)],void 0===(o=function(e,t,o){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=t)&&n.__esModule?n:{default:n},u=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n._regex=(0,o.getOption)("regex",e,{regex:null}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.default),u(r,[{key:"filter",value:function(e){var t=!1;return e.annotation.message&&this._regex&&(t=this._regex.test(e.annotation.message)),t}}]),r}();e.default=r}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(1)],void 0===(o=function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=t)&&n.__esModule?n:{default:n},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n._counter=Math.floor(1e4*Math.random()),n._denominator=e.denominator,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.default),i(r,[{key:"filter",value:function(e){return this._counter++%this._denominator==0}}]),r}();e.default=r}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[t,n(1)],void 0===(o=function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=t)&&n.__esModule?n:{default:n},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n._probability=1e3*e.probability,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.default),i(r,[{key:"probability",get:function(){return this._probability/1e3}}]),i(r,[{key:"filter",value:function(e){return Math.round(1e3*Math.random())<this._probability}}]),r}();e.default=r}.apply(t,r))||(e.exports=o)},function(e,t,n){var r;void 0===(r=function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(){function t(e){n(this,t),this._storage="session"===e?sessionStorage:localStorage}return r(t,[{key:"_getItemAsInt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this._storage.getItem(e);return null==n?t:parseInt(n,10)}},{key:"_setItem",value:function(e,t){this._storage.setItem(e,t)}},{key:"insertCount",get:function(){return this._getItemAsInt("OILLogStats.IC")},set:function(e){this._setItem("OILLogStats.IC",e)}},{key:"dropCount",get:function(){return this._getItemAsInt("OILLogStats.DC")},set:function(e){this._setItem("OILLogStats.DC",e)}},{key:"sinceTime",get:function(){return this._getItemAsInt("OILLogStats.ST",0)},set:function(e){this._setItem("OILLogStats.ST",e)}}]),t}(),i=function(){function e(){n(this,e),this._insertCount=0,this._dropCount=0,this._timestamp=(new Date).getTime()}return r(e,[{key:"insertCount",get:function(){return this._insertCount},set:function(e){this._insertCount=e}},{key:"dropCount",get:function(){return this._dropCount},set:function(e){this._dropCount=e}},{key:"sinceTime",get:function(){return this._timestamp},set:function(e){this._timestamp=e}}]),e}(),t=function(){function t(e){n(this,t),this._inMemory="in-memory"===e||"memory"===e||!e,this._inMemory?this._store=new i:"session"===e?this._store=new o("session"):"local"===e&&(this._store=new o("local"))}return r(t,[{key:"reset",value:function(){this._store.insertCount=0,this._store.dropCount=0,this._store.sinceTime=(new Date).getTime()}},{key:"insertCount",get:function(){return this._store.insertCount},set:function(e){this._store.insertCount=e}},{key:"dropCount",get:function(){return this._store.dropCount},set:function(e){this._store.dropCount=e}},{key:"messageCount",get:function(){return this._store.dropCount+this._store.insertCount}},{key:"sinceTime",set:function(e){this._store.sinceTime=e},get:function(){return this._store.sinceTime}}]),t}();e.default=t}.apply(t,[t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Object.keys(t).map(function(e){return t[e]})}}.apply(t,[t]))||(e.exports=r)},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var s=n(85),l=Math.max;e.exports=function(i,u,a){return u=l(void 0===u?i.length-1:u,0),function(){for(var e=arguments,t=-1,n=l(e.length-u,0),r=Array(n);++t<n;)r[t]=e[u+t];t=-1;for(var o=Array(u+1);++t<u;)o[t]=e[t];return o[u]=a(r),s(i,this,o)}}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(87),o=n(86),i=n(84);e.exports=function(e,t){return i(o(e,t,r),e+"")}},function(e,t,n){var r=n(88),s=n(83);e.exports=function(a){return r(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0;for(o=3<a.length&&"function"==typeof o?(r--,o):void 0,i&&s(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var u=t[n];u&&a(e,u,n,o)}return e})}},function(e,t,n){var r=n(2),o=n(14);e.exports=function(e){return r(e,o(e))}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(40),o=n(43),i=n(39),u=Function.prototype,a=Object.prototype,s=u.toString,l=a.hasOwnProperty,c=s.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==c}},function(e,t){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(41),o=n(93);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(94),o=n(39);e.exports=function(e){return o(e)&&r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(3),o=Object.create,i=function(){function n(){}return function(e){if(!r(e))return{};if(o)return o(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();e.exports=i},function(e,t,n){var r=n(46).Uint8Array;e.exports=r},function(e,t,n){var r=n(99);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(100);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(n,e,t){(function(e){var t="object"==_typeof(e)&&e&&e.Object===Object&&e;n.exports=t}).call(this,t(16))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var y=n(48),v=n(47),g=n(101),_=n(45),m=n(44),b=n(96),w=n(42),k=n(95),S=n(38),P=n(41),O=n(3),x=n(92),T=n(91),I=n(37),C=n(90);e.exports=function(e,t,n,r,o,i,u){var a=I(e,n),s=I(t,n),l=u.get(s);if(l)y(e,n,l);else{var c=i?i(a,s,n+"",e,t,u):void 0,f=void 0===c;if(f){var h=w(s),p=!h&&S(s),d=!h&&!p&&T(s);c=s,h||p||d?c=w(a)?a:k(a)?_(a):p?v(s,!(f=!1)):d?g(s,!(f=!1)):[]:x(s)||b(s)?b(c=a)?c=C(a):O(a)&&!P(a)||(c=m(s)):f=!1}f&&(u.set(s,c),o(c,s,r,i,u),u.delete(s)),y(e,n,c)}}},function(e,t){e.exports=function(s){return function(e,t,n){for(var r=-1,o=Object(e),i=n(e),u=i.length;u--;){var a=i[s?u:++r];if(!1===t(o[a],a,o))break}return e}}},function(e,t,n){var r=n(105)();e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(107),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var o=n(6);e.exports=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},function(e,t,n){var r=n(6);e.exports=function(e){return-1<r(this.__data__,e)}},function(e,t,n){var r=n(6);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(6),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var l=n(49),c=n(48),f=n(106),h=n(104),p=n(3),d=n(14),y=n(37);e.exports=function r(o,i,u,a,s){o!==i&&f(i,function(e,t){if(p(e))s||(s=new l),h(o,i,t,u,r,a,s);else{var n=a?a(y(o,t),e,t+"",o,i,s):void 0;void 0===n&&(n=e),c(o,t,n)}},d)}},function(e,t,n){var r,o;r=[t,n(7),n(82),n(35),n(32),n(13),n(51),n(50)],void 0===(o=function(e,t,n,r,o,i,u,a){Object.defineProperty(e,"__esModule",{value:!0});var s=d(t),l=d(n),c=d(r),f=d(o),h=d(i),p=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var y="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},v=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),g={logging:{component:"IntuitLoggingSDK",appId:"IntuitLoggingSDK",schemaVersion:"1.3.1",levels:{atLevelAndHigher:"debug"},providers:{console:{type:"local"}}}},_={type:"remote",env:"",endpoint:{host:"",basepath:"/v1/log/message",headers:{Authorization:""}}},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configuration=g,this._providers={},this._activeLevels=[],this._mergeProps={},this._isLoggingEnabled=!0,this._logDisabledPrintedAlready=!1,this._component=null,this._appId=null,this.setConfiguration()}return v(e,[{key:"setConfiguration",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!1;if(e&&this._isValidConfiguration(e,null)){if(e&&e.apiKey&&e.appId&&e.env){var n="DefaultOILRemoteProvider_"+e.env+"_"+(0,a.hashCode)(e.appId);this._configuration.logging.providers[n]=_,this._configuration.logging.providers[n].env=e.env,this._configuration.logging.providers[n].endpoint.protocol="https",this._configuration.logging.providers[n].endpoint.host="prod"===e.env?"logging.api.intuit.com":"logging-e2e.api.intuit.com",this._configuration.logging.providers[n].endpoint.headers.Authorization="Intuit_APIKey intuit_apikey="+e.apiKey+", intuit_apkey_version=1.0",this._configuration.logging.env=e.env,this._configuration.logging.appId=e.appId}else this._configuration=e;this._appId=this._configuration.logging.appId,this._component=this._configuration.logging.component,t=!0}return this._isLoggingEnabled=this._configuration.logging.enableLogging,this._buildMergeProps(),this.setActiveLevels(this._getLogLevels()),this._addProvidersFromConfiguration(this._configuration),t}},{key:"setIsLoggingEnabled",value:function(e){null===e&&"boolean"!=typeof e||(this._isLoggingEnabled=e)}},{key:"getRuntimeProps",value:function(){return this._mergeProps}},{key:"setRuntimeProps",value:function(e){this._mergeProps=(0,s.default)({},this._mergeProps,e)}},{key:"addHeaders",value:function(r){this._getRemoteProviders().forEach(function(e){var t=e._itemQueue.getHeaders(),n=(0,s.default)({},t,r);e._itemQueue.setHeaders(n)})}},{key:"addQueryParams",value:function(r){this._getRemoteProviders().forEach(function(e){var t=e._itemQueue.getQueryParams(),n=(0,s.default)({},t,r);e._itemQueue.setQueryParams(n)})}},{key:"addProviderHeaders",value:function(e,t){if(this._providers[e]&&"remote"===this._providers[e]._configuration.type){var n=this._providers[e]._itemQueue.getHeaders(),r=(0,s.default)({},n,t);this._providers[e]._itemQueue.setHeaders(r)}else console.error("Cannot set headers to this provider. Please make sure the provider exists and is a remote provider")}},{key:"setComponent",value:function(t){if(null===t||"string"!=typeof t)throw"Please use a valid value for component";this._component=t,this._getRemoteProviders().forEach(function(e){e._component=t})}},{key:"setActiveLevels",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(0,l.default)(h.default);this._activeLevels=e.filter(function(e){return 0<=t.indexOf(e)})}},{key:"getProvider",value:function(e){return this._providers[e]}},{key:"addProvider",value:function(e,t){"object"===(void 0===t?"undefined":y(t))&&("local"===(this._providers[e]=t)._configuration.type?this._providers[e]=t:"remote"===t._configuration.type&&(this._providers[e]=t))}},{key:"removeProvider",value:function(e){this._providers[e]=null,delete this._providers[e]}},{key:"debug",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._logToProviders(h.default.DEBUG,e,t,n)}},{key:"info",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._logToProviders(h.default.INFO,e,t,n)}},{key:"log",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this.info(e,t,n)}},{key:"warn",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._logToProviders(h.default.WARN,e,t,n)}},{key:"error",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._logToProviders(h.default.ERROR,e,t,n)}},{key:"fatal",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._logToProviders(h.default.FATAL,e,t,n)}},{key:"_isValidConfiguration",value:function(e,t){var n=this;return(0,p.default)(e,t,function(e){n._validationErrors=e})}},{key:"_warnConsoleOnce",value:function(e){this._logDisabledPrintedAlready||(console.warn(e),this._logDisabledPrintedAlready=!0)}},{key:"_logToProviders",value:function(e,t,n,r){if(!1===this._isLoggingEnabled)this._warnConsoleOnce("Logging is disabled. Messages will not be logged until loggingEnabled = true");else if(0===Object.keys(this._providers).length)this._warnConsoleOnce("There are no providers. Logging will be disabled until a new provider is added.");else if(this._isActiveLevel(e))for(var o in this._providers)this._providers[o]&&this._providers[o].log(t,e,this._mergeProps,n,r)}},{key:"_isActiveLevel",value:function(e){return 0<=this._activeLevels.indexOf(e)}},{key:"_getLoggingConfiguration",value:function(){return this._configuration.logging||{}}},{key:"_addProvidersFromConfiguration",value:function(e){var t,n,r=e?e.logging:this._getLoggingConfiguration(),o=r.providers;if(o)for(var i in this._removeCurrentProvidersWithConfiguration(r),o){var u=o[i],a=o[i].type;"local"===a?this.addProvider(i,(n=u,new c.default(n))):"remote"===a&&this.addProvider(i,(t=(0,s.default)({},u,{providerName:i,appId:this._appId,component:this._component}),new f.default(t)))}}},{key:"_getRemoteProviders",value:function(){var e=[];for(var t in this._providers)"remote"===this._providers[t]._configuration.type&&e.push(this._providers[t]);return e}},{key:"_removeCurrentProvidersWithConfiguration",value:function(e){var t=(e||this._getLoggingConfiguration()).providers;for(var n in this._providers)t[n]||this.removeProvider(n)}},{key:"_getLogLevels",value:function(){var n=this._getLoggingConfiguration(),e=[h.default.DEBUG,h.default.INFO,h.default.WARN,h.default.ERROR,h.default.FATAL];if(n.levels&&n.levels.atLevelsOnly)return n.levels.atLevelsOnly;if(n.levels&&n.levels.atLevelAndHigher){var r=void 0;return e.forEach(function(e,t){e===n.levels.atLevelAndHigher&&(r=t)}),e.slice(r)}return e}},{key:"_buildMergeProps",value:function(){var e=this._getLoggingConfiguration();e.addProps&&(this._mergeProps=e.addProps)}}]),e}();e.default=m}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[e,n(115),n(13),n(35),n(32),n(31)],void 0===(o=function(e,t,n,r,o,i){var u=f(t),a=f(n),s=f(r),l=f(o),c=f(i);function f(e){return e&&e.__esModule?e:{default:e}}e.exports={LoggingUtility:u.default,LogLevel:a.default,LocalLoggingProvider:s.default,RemoteLoggingProvider:l.default,LogMessage:c.default}}.apply(t,r))||(e.exports=o)}])}),intuitLoggingBundle$1=unwrapExports(intuitLoggingBundle),isValidJSON=function(e){var t=!1,n=e&&"string"==typeof e?e:JSON.stringify(e);try{JSON.parse(n),t=!0}catch(e){}return t},Logger=function(e){_inherits(o,intuitLoggingBundle$1.LoggingUtility);var n=_createSuper(o);function o(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,o),(e=n.call(this)).config=Object.assign({},t),e.oilConfig={},e.setOilConfig(),e.setConfiguration(e.oilConfig),e.invalidJsonSentToLoggerHandler=function(e,t){console.log("logger message and/or props were invalid"),console.log(" -> message is a string: ".concat("string"==typeof e)),console.log(" -> props is a valid JSON: ".concat(isValidJSON(t)))},e.initSuperLoggers(),e}return _createClass(o,[{key:"initSuperLoggers",value:function(){var r=this;this._activeLevels.map(function(n){r[n]=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&isValidJSON(t)?_get(_getPrototypeOf(o.prototype),n,r).call(r,e,t):r.invalidJsonSentToLoggerHandler(e,t)}})}},{key:"setOilConfig",value:function(){this.oilConfig={logging:{schemaVersion:"1.3.0",component:"defaultApp",appId:this.config.appId,levels:{atLevelAndHigher:"debug"},providers:{console:{type:"local"},remote:{type:"remote",env:this.config.remoteEnvironment,reliableTransmission:{maxItems:this.config.reliableTransmissionMaxItems,interval:this.config.reliableTransmissionInterval},endpoint:{host:this.config.endpointHost,port:443,protocol:this.config.endpointProtocol,basepath:this.config.endpointBasepath,bodyFormat:"json",headers:{Authorization:"Intuit_APIKey intuit_apikey=".concat(this.config.endpointHeadersApiKey,", intuit_apkey_version=").concat(this.config.endpointHeadersApKeyVersion)}}}}}}}}]),o}(),CoreServiceAdapterClass=function e(t){_classCallCheck(this,e),this.configuration=Object.assign({logging:{}},t),this.analytics=new Analytics(this.configuration.analytics),this.messaging=messaging,this.data=new Data,this.logger=new Logger(this.configuration.logging)};!function(e){window.coreServiceAdapter=new CoreServiceAdapterClass({logging:e.oil})}(window.appVars);